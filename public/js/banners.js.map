{"version":3,"sources":["banner_loader.coffee","detect_breakpoints.coffee"],"names":[],"mappings":"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","file":"banners.js","sourcesContent":["'use strict'\n$ = jQuery\n\nclass Banners\n  constructor: ->\n    lazyLoadSetting        = $('meta[name=\"banner-lazyload\"]').attr('content')\n    @bannerReloadFrequency = parseInt($('meta[name=\"banner-reload-frequency\"]').attr('content'))\n    @countSlideChange      = 0\n    @startTime             = Date.now()\n    @savedTime             = @startTime\n    @adBlockIsChecked      = false\n\n    if lazyLoadSetting? then @lazyLoad = JSON.parse(lazyLoadSetting) else @lazyLoad = false\n\n    @init()\n\n  init: ->\n    $(window).load =>\n      @$bannerLarge      = $('[data-banner-md-lg]')\n      @$bannerSmall      = $('[data-banner-sm]')\n      @$bannerExtraSmall = $('[data-banner-xs]')\n      @$gallery          = $('[data-init=\"gallery-horizontal\"]')\n      @uuid              = EAS_uuid() # Emediate function to get unique page id\n      console.log('UUID: '+@uuid)\n      @cleanDuplicatedCodes()\n\n    if @lazyLoad\n      pageReady = false\n\n      $(window).load =>\n        if $.breakpoints() is 'md' or $.breakpoints() is 'lg'\n          @$gallery.find('[data-banner-target]').attr 'data-banner-target', false  # Remove gallery banners from flow\n\n        @insertInView() # inital insertion\n        pageReady = true\n\n      $(document).on 'interval-scroll', => @insertInView() if pageReady\n      $(document).on 'horizontal-gallery-slide-change', => @lazyLoadGallery() if pageReady\n\n    else\n      $(window).load => @insertAll()\n\n  cleanDuplicatedCodes: ->\n    self = @\n\n    @findBanners().each ->\n      code    = JSON.stringify $(this).data('bannerCode')\n      $target = $(\"[data-banner-code='#{code}']\")\n      console.log(code)\n\n      if $target.length > 1 and code.indexOf(',') < 0\n        self.addUnderscoreIdsToDuplicates($target, code)\n\n  addUnderscoreIdsToDuplicates: ($target, code) ->\n    $target.each (index) ->\n      id = index + 1\n      $(this).attr 'data-banner-code', code + '_' + id\n\n  insertInView: ->\n    self = @\n    scrollDistance = $(window).scrollTop() + $(window).height() + 800\n\n    try @findBanners().each ->\n      $target = $(this)\n\n      if $target.offset().top < scrollDistance # check if banner is in view\n        self.prepareBanner $target\n    catch e then console.error \"Unable to find any banner positions\"\n\n  insertAll: ->\n    self = @\n\n    try @findBanners().each ->\n      self.prepareBanner $(this)\n    catch e then console.error \"Unable to find any banner positions\"\n\n  findBanners: ->\n    # Goes through all banners and return banner-positions not already used\n    if $.breakpoints() is 'md' or $.breakpoints() is 'lg'\n      return @$bannerLarge.find('[data-banner-target]').not('[data-banner-target=\"false\"]')\n    else if $.breakpoints() is 'sm'\n      return @$bannerSmall.find('[data-banner-target]').not('[data-banner-target=\"false\"]')\n    else if $.breakpoints() is 'xs'\n      return @$bannerExtraSmall.find('[data-banner-target]').not('[data-banner-target=\"false\"]')\n\n  prepareBanner: ($target) ->\n    code       = $target.data('banner-code') # get code from data attribute on banner position\n    console.log(code)\n    codeArray  = code.toString().split(',') # codes may be comma separated, therefore convert to array\n\n    $target.attr 'data-banner-target', false # set taget to false to avoid being picked up again by findbanners()\n\n    @placeIframeBanner($target, codeArray[0])\n    @shiftCodeArray(codeArray)\n\n  generateParameters: ->\n    cxenseParams   = eas.hlp.getCxProfileCookieData() # Cxense params to get segmented banners\n    category       = $('meta[name=\"banner-category\"]').attr('content') # get category from meta tag (mainly for external blogs)\n    url            = window.location.protocol + \"//\" + window.location.host + window.location.pathname\n\n    if category? then categoryParams = \"&cat=#{category}\" else categoryParams = ''\n\n    return \"cre=mu&js=y&target=_blank&url=#{url}&pageviewid=#{@uuid}\" + categoryParams + cxenseParams\n\n  placeIframeBanner: ($target, code) ->\n    id = \"banner-#{Math.floor((Math.random() * 999999999) + 1)}\"\n    $target\n      .attr('id', id)\n      .empty() # Clear position if banner is updated\n      .parent().addClass 'text-center'\n\n    if $target.parent().data('wallpaper-banner')?\n      $('body').removeAttr('style') # Clear body background image if target is wallpaper\n\n    if code\n      EAS_load_fif(id, \"/emediate/EAS_fif.html\", \"http://eas4.emediate.eu/eas?cu=#{code}&#{@generateParameters()}\", 0, 0)\n    else\n      $target.hide()\n\n    @checkIframeStatus($target, code)\n\n  checkIframeStatus: ($target, code) ->\n    $iframe  = $target.find('iframe').eq(0)\n\n    $iframe.load =>\n      $content = $iframe.contents()\n\n      # checks if loaded banner iframe has any visible content\n      if $content.find('img, a, div, canvas, object, iframe, embed')[0] or $target.children().length > 1\n        $target.parent().siblings('[data-continue-reading]').show()\n\n      else\n        $target.hide()\n\n      # Check if ad content was blocked\n      unless @adBlockIsChecked\n        @adBlockIsChecked = true\n        if $content.find(\"body\").html().length then @adBlockDetection(true) else @adBlockDetection(false)\n\n  shiftCodeArray: (codeArray) ->\n    # Shift code array and apply it to positions with same codes to avoid duplicates\n    $target = $(\"[data-banner-code='#{codeArray}']\")\n    codeArray.shift()\n    $target.attr 'data-banner-code', codeArray.join(\",\")\n\n  lazyLoadGallery: ->\n    @uuid = EAS_uuid() # Refresh uuid\n    @$gallery.find('[data-active-slide=true] [data-banner-target]').attr 'data-banner-target', true # set gallery banner target to true on the banner inside current slide\n    @insertInView() # Recheck for unloaded banner positions in view\n    @updateGalleryHorseshoe()\n\n  updateGalleryHorseshoe: ->\n    if @bannerReloadFrequency\n      @countSlideChange++\n\n      # When countSlideChange matches frequency (optional in CMS): refresh banners in the horseshoe\n      if @countSlideChange % @bannerReloadFrequency is 0 and @coolDown() is true and ($.breakpoints() is 'md' or $.breakpoints() is 'lg')\n        @uuid = EAS_uuid() # Refresh uuid\n        $('[data-banner-md-lg] [data-banner-target]').attr 'data-banner-target', true\n        $('[data-top-banner] [data-banner-target]').attr 'data-banner-target', true\n        $('[data-active-slide] [data-banner-target]').attr 'data-banner-target', false\n        @countSlideChange = 0\n        $.delay 0, => @insertInView() # pull to end of call-queue\n\n  coolDown: ->\n    # Avoid banner overheat if users click through gallery quickly\n    if Date.now() - 5000 > @savedTime\n      @savedTime = Date.now()\n      return true\n\n  adBlockDetection: (adsAreLoaded) ->\n    if adsAreLoaded\n      dataLayer.push\n        'event' : 'ads-are-loaded'\n        'top-banner-load-time' : Date.now() - @startTime\n\n      console.info \"Ads are loaded\", Date.now() - @startTime\n    else\n      dataLayer.push({ 'event' : 'ads-are-blocked' })\n      console.error \"Ads are blocked\"\n\nwindow.Banners = new Banners()","(($) ->\n\n  Breakpoint = (element, options) ->\n    # make the options variables available globally within the module\n    @options = $.extend({}, Breakpoint.DEFAULTS, options)\n    @bindEvent()\n    return\n\n  #Plugin defaults\n  Breakpoint.DEFAULTS =\n    xs: 480\n    sm: 768\n    md: 1025\n    lg: 1200\n\n  Breakpoint::bindEvent = ->\n    #Use var self if necessary to manage this-references\n    self = this\n    breakpoint = 'xs'\n    breakpoint = self.detect($(window).width())\n    breakpoint\n\n  Breakpoint::detect = (width) ->\n    o = @options\n    if o.lg <= width\n      return 'lg'\n    if o.md <= width and o.lg >= width\n      return 'md'\n    if o.sm <= width and o.md > width\n      return 'sm'\n    if o.sm > width\n      return 'xs'\n    return\n\n  #Omits fn so that the function doesn't need to be applied to an object\n\n  $.breakpoints = (data) ->\n    $object = new Breakpoint(this)\n    $object.bindEvent data\n\n  return\n) jQuery"],"sourceRoot":"/source/"}